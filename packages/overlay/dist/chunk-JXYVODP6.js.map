{"version":3,"sources":["../src/runtime/loadReactGrabRuntime.ts","../src/runtime/registerClipboardInterceptor.ts"],"sourcesContent":["const DEFAULT_SCRIPT_URL = \"https://unpkg.com/react-grab@0.0.51/dist/index.global.js\";\nconst GLOBAL_FLAG = \"__shipflowReactGrabLoaded\";\n\ntype LoadOptions = {\n  url?: string;\n};\n\nlet pendingLoad: Promise<void> | null = null;\n\nexport function loadReactGrabRuntime(options: LoadOptions = {}): Promise<void> {\n  if (typeof window === \"undefined\") {\n    return Promise.resolve();\n  }\n\n  if ((window as unknown as Record<string, unknown>)[GLOBAL_FLAG]) {\n    return Promise.resolve();\n  }\n\n  if (pendingLoad) {\n    return pendingLoad;\n  }\n\n  const scriptUrl = options.url ?? DEFAULT_SCRIPT_URL;\n\n  pendingLoad = new Promise<void>((resolve, reject) => {\n    const existing = Array.from(document.scripts).find((script) => script.src === scriptUrl);\n    if (existing) {\n      (window as unknown as Record<string, unknown>)[GLOBAL_FLAG] = true;\n      pendingLoad = null;\n      resolve();\n      return;\n    }\n\n    const script = document.createElement(\"script\");\n    script.src = scriptUrl;\n    script.crossOrigin = \"anonymous\";\n    script.async = false;\n    script.onload = () => {\n      (window as unknown as Record<string, unknown>)[GLOBAL_FLAG] = true;\n      pendingLoad = null;\n      resolve();\n    };\n    script.onerror = (error) => {\n      pendingLoad = null;\n      reject(error instanceof ErrorEvent ? error.error : error);\n    };\n    document.head.appendChild(script);\n  });\n\n  return pendingLoad;\n}\n\n\n\n","import { loadReactGrabRuntime } from \"./loadReactGrabRuntime\";\nimport type { SelectionPayload } from \"./types\";\n\nconst GLOBAL_KEY = \"__shipflowOverlayCleanup\";\nconst HIGHLIGHT_ATTR = \"data-react-grab-chat-highlighted\";\nconst STYLE_ID = \"shipflow-overlay-highlight-style\";\nconst EVENT_OPEN = \"react-grab-chat:open\";\nconst EVENT_CLOSE = \"react-grab-chat:close\";\n\ntype ClipboardParseResult = {\n  htmlFrame: string | null;\n  codeLocation: string | null;\n};\n\nexport type ClipboardInterceptorOptions = {\n  projectRoot?: string;\n  highlightColor?: string;\n  highlightStyleId?: string;\n  logClipboardEndpoint?: string | null;\n  reactGrabUrl?: string;\n};\n\nconst defaultOptions: Required<Pick<ClipboardInterceptorOptions, \"highlightColor\" | \"highlightStyleId\">> =\n  {\n    highlightColor: \"#ff40e0\",\n    highlightStyleId: STYLE_ID,\n  };\n\nfunction ensureHighlightStyles(color: string, styleId: string) {\n  if (document.getElementById(styleId)) return;\n  const style = document.createElement(\"style\");\n  style.id = styleId;\n  style.textContent = `\n[${HIGHLIGHT_ATTR}=\"true\"] {\n  outline: 2px solid ${color};\n  outline-offset: 2px;\n  transition: outline 0.2s ease;\n}`;\n  document.head.appendChild(style);\n}\n\nfunction parseClipboard(text: string): ClipboardParseResult {\n  if (typeof text !== \"string\") {\n    return { htmlFrame: null, codeLocation: null };\n  }\n  const htmlFrameMatch = text.match(/## HTML Frame:\\n([\\s\\S]*?)(?=\\n## Code Location:|$)/);\n  const codeLocationMatch = text.match(/## Code Location:\\n([\\s\\S]*?)(?=\\n<\\/selected_element>|$)/);\n  const selectedElementMatch = text.match(/<selected_element>\\n([\\s\\S]*?)\\n<\\/selected_element>/);\n  const htmlFrame = htmlFrameMatch\n    ? htmlFrameMatch[1].trim()\n    : selectedElementMatch\n      ? selectedElementMatch[1].trim()\n      : null;\n  const codeLocation = codeLocationMatch ? codeLocationMatch[1].trim() : null;\n  return { htmlFrame, codeLocation };\n}\n\nfunction extractFilePath(stack: string | null): string | null {\n  if (typeof stack !== \"string\") return null;\n\n  // Try multiple patterns to handle different formats from react-grab\n  const patterns = [\n    // Format: \"in Component (path/to/file.tsx:10:5)\" or \"at Component (path/to/file.tsx:10:5)\"\n    /\\b(?:in|at)\\s+\\S+\\s*\\(([^()]+?\\.(?:[jt]sx?|mdx?))(?::\\d+)*\\)/gi,\n    // Format: \"in path/to/file.tsx\" or \"at path/to/file.tsx\"\n    /\\b(?:in|at)\\s+((?:[A-Za-z]:)?[^\\s:()]+?\\.(?:[jt]sx?|mdx?))/gi,\n    // Format: just \"(path/to/file.tsx:10:5)\" in parentheses\n    /\\(([^()]+?\\.(?:[jt]sx?|mdx?))(?::\\d+)*\\)/gi,\n    // Format: bare path like \"app/page.tsx\" or \"./app/page.tsx\"\n    /(?:^|\\s)((?:\\.\\/)?(?:[A-Za-z]:)?[^\\s:()]+?\\.(?:[jt]sx?|mdx?))/gim,\n  ];\n\n  for (const pattern of patterns) {\n    pattern.lastIndex = 0;\n    let match: RegExpExecArray | null = null;\n    while ((match = pattern.exec(stack))) {\n      const candidate = match[1]?.trim();\n      if (!candidate) continue;\n      // Skip node_modules paths\n      if (candidate.includes(\"node_modules\")) continue;\n      // Skip if it looks like a URL\n      if (candidate.includes(\"://\")) continue;\n      return candidate;\n    }\n  }\n\n  return null;\n}\n\nfunction toRelativePath(filePath: string | null, projectRoot?: string): string | null {\n  if (!filePath) return null;\n  if (!projectRoot) return filePath;\n  const normalizedRoot = projectRoot.endsWith(\"/\")\n    ? projectRoot\n    : `${projectRoot}/`;\n  if (filePath.startsWith(normalizedRoot)) {\n    const sliced = filePath.slice(normalizedRoot.length);\n    return sliced.startsWith(\"/\") ? sliced.slice(1) : sliced;\n  }\n  return filePath;\n}\n\ntype Pointer = { clientX: number; clientY: number };\n\nfunction findElementAtPoint(clientX: number, clientY: number): HTMLElement | null {\n  const elements = document.elementsFromPoint(clientX, clientY);\n  for (const element of elements) {\n    if (!(element instanceof HTMLElement)) continue;\n    if (element.closest?.(\"[data-react-grab]\")) continue;\n    const style = window.getComputedStyle(element);\n    if (\n      style.pointerEvents === \"none\" ||\n      style.visibility === \"hidden\" ||\n      style.display === \"none\" ||\n      Number(style.opacity) === 0\n    ) {\n      continue;\n    }\n    return element;\n  }\n  return null;\n}\n\nfunction findTooltipElement(): HTMLElement | null {\n  const OVERLAY_SELECTOR = \"[data-react-grab=\\\"true\\\"]\";\n  const TOOLTIP_SELECTOR = \"div.pointer-events-none.bg-grab-pink-light.text-grab-pink\";\n  const visited = new Set<Node>();\n\n  const visit = (node: Node | null): HTMLElement | null => {\n    if (!node || visited.has(node)) {\n      return null;\n    }\n    visited.add(node);\n\n    if (node instanceof HTMLElement || node instanceof DocumentFragment) {\n      const queryMatch =\n        node instanceof HTMLElement ? node.querySelector<HTMLElement>(TOOLTIP_SELECTOR) : null;\n      if (queryMatch) {\n        return queryMatch;\n      }\n      const children = node instanceof HTMLElement ? Array.from(node.children) : [];\n      for (const child of children) {\n        const found = visit(child);\n        if (found) {\n          return found;\n        }\n      }\n    }\n\n    if (node instanceof HTMLElement && node.shadowRoot) {\n      return visit(node.shadowRoot);\n    }\n\n    return null;\n  };\n\n  const hosts = document.querySelectorAll<HTMLElement>(OVERLAY_SELECTOR);\n  for (const host of hosts) {\n    const found = visit(host) ?? (host.shadowRoot ? visit(host.shadowRoot) : null);\n    if (found) {\n      return found;\n    }\n  }\n  return null;\n}\n\nfunction getHoverTagRect():\n  | {\n      top: number;\n      left: number;\n      width: number;\n      height: number;\n    }\n  | null {\n  const tooltip = findTooltipElement();\n  if (!(tooltip instanceof HTMLElement)) {\n    return null;\n  }\n  const rect = tooltip.getBoundingClientRect();\n  if (rect.width === 0 && rect.height === 0) {\n    return null;\n  }\n  return {\n    top: rect.top,\n    left: rect.left,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n\nfunction applyHighlight(element: HTMLElement | null) {\n  if (!element) return;\n  const previous = document.querySelector<HTMLElement>(`[${HIGHLIGHT_ATTR}=\"true\"]`);\n  if (previous && previous !== element) {\n    previous.removeAttribute(HIGHLIGHT_ATTR);\n  }\n  element.setAttribute(HIGHLIGHT_ATTR, \"true\");\n}\n\nfunction clearHighlight() {\n  const highlighted = document.querySelector<HTMLElement>(`[${HIGHLIGHT_ATTR}=\"true\"]`);\n  highlighted?.removeAttribute(HIGHLIGHT_ATTR);\n}\n\nfunction dispatchOpenEvent(detail: SelectionPayload & { tagRect: unknown }) {\n  window.dispatchEvent(\n    new CustomEvent(EVENT_OPEN, {\n      detail,\n    }),\n  );\n}\n\nexport function registerClipboardInterceptor(\n  options: ClipboardInterceptorOptions = {},\n): () => void {\n  if (typeof window === \"undefined\" || typeof navigator === \"undefined\") {\n    return () => undefined;\n  }\n\n  if ((window as unknown as Record<string, () => void>)[GLOBAL_KEY]) {\n    return (window as unknown as Record<string, () => void>)[GLOBAL_KEY];\n  }\n\n  if (!navigator.clipboard || typeof navigator.clipboard.writeText !== \"function\") {\n    console.warn(\"[shipflow-overlay] navigator.clipboard.writeText is not available.\");\n    return () => undefined;\n  }\n\n  const projectRoot = options.projectRoot;\n  const highlightColor = options.highlightColor ?? defaultOptions.highlightColor;\n  const highlightStyleId = options.highlightStyleId ?? defaultOptions.highlightStyleId;\n  const logClipboardEndpoint =\n    options.logClipboardEndpoint === undefined ? null : options.logClipboardEndpoint;\n\n  ensureHighlightStyles(highlightColor, highlightStyleId);\n  clearHighlight();\n  void loadReactGrabRuntime({ url: options.reactGrabUrl });\n\n  let lastPointer: Pointer | null = null;\n\n  const pointerListener = (event: Event) => {\n    const pointer = event as PointerEvent;\n    lastPointer = { clientX: pointer.clientX, clientY: pointer.clientY };\n  };\n\n  window.addEventListener(\"pointerup\", pointerListener, true);\n  window.addEventListener(EVENT_CLOSE, clearHighlight);\n\n  const originalWriteText = navigator.clipboard.writeText.bind(navigator.clipboard);\n\n  const overrideWriteText = async function (text: string) {\n    const parsed = parseClipboard(text);\n    const isReactGrabPayload = Boolean(parsed.htmlFrame || parsed.codeLocation);\n\n    const result = await originalWriteText(text);\n\n    if (!isReactGrabPayload) {\n      return result;\n    }\n\n    const pointer = lastPointer;\n    lastPointer = null;\n    const pointerPayload = pointer ? { x: pointer.clientX, y: pointer.clientY } : null;\n\n    let boundingRect: SelectionPayload[\"boundingRect\"] = null;\n    let element: HTMLElement | null = null;\n\n    if (pointer) {\n      element = findElementAtPoint(pointer.clientX, pointer.clientY);\n    }\n\n    if (!element) {\n      const fallback = document.querySelector<HTMLElement>(`[${HIGHLIGHT_ATTR}=\"true\"]`);\n      if (fallback) {\n        element = fallback;\n      }\n    }\n\n    if (element instanceof HTMLElement) {\n      applyHighlight(element);\n      const rect = element.getBoundingClientRect();\n      boundingRect = {\n        top: rect.top,\n        left: rect.left,\n        width: rect.width,\n        height: rect.height,\n      };\n    }\n\n    let filePath = parsed.codeLocation ? extractFilePath(parsed.codeLocation) : null;\n    filePath = filePath ? toRelativePath(filePath, projectRoot) : null;\n\n    const tagRect = getHoverTagRect();\n\n    dispatchOpenEvent({\n      htmlFrame: parsed.htmlFrame,\n      codeLocation: parsed.codeLocation,\n      filePath,\n      clipboardData: text,\n      pointer: pointerPayload,\n      boundingRect,\n      tagRect,\n    } as SelectionPayload & { tagRect: unknown });\n\n    if (logClipboardEndpoint) {\n      try {\n        await fetch(logClipboardEndpoint, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            clipboardData: text,\n            timestamp: new Date().toISOString(),\n            filePath,\n          }),\n        });\n      } catch (error) {\n        console.error(\"[shipflow-overlay] Failed to log clipboard payload\", error);\n      }\n    }\n\n    return result;\n  };\n\n  navigator.clipboard.writeText = overrideWriteText;\n\n  const cleanup = () => {\n    window.removeEventListener(\"pointerup\", pointerListener, true);\n    window.removeEventListener(EVENT_CLOSE, clearHighlight);\n    if ((navigator.clipboard.writeText as unknown) === overrideWriteText) {\n      navigator.clipboard.writeText = originalWriteText;\n    }\n    clearHighlight();\n    delete (window as unknown as Record<string, () => void>)[GLOBAL_KEY];\n  };\n\n  (window as unknown as Record<string, () => void>)[GLOBAL_KEY] = cleanup;\n  return cleanup;\n}\n\n\n\n"],"mappings":"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","names":["script"]}